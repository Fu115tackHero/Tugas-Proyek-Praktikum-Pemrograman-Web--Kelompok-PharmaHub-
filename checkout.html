<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Checkout | PharmaHub</title>
    <style>
      body {
        font-family: "Inter", Arial, sans-serif;
        background: linear-gradient(to bottom, #eff6ff, #dbeafe);
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 900px;
        margin: 40px auto;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        padding: 32px 24px;
        display: flex;
        flex-wrap: wrap;
        gap: 32px;
      }
      .checkout-form {
        flex: 1 1 320px;
        min-width: 320px;
      }
      .order-summary {
        flex: 1 1 320px;
        min-width: 320px;
        background: #f1f5f9;
        border-radius: 10px;
        padding: 24px 20px;
        box-sizing: border-box;
        height: fit-content;
      }
      h2 {
        margin-top: 0;
        color: #1e40af;
        font-size: 2rem;
        font-weight: 700;
      }
      h3 {
        color: #1e293b;
        margin-bottom: 12px;
        font-size: 1.2rem;
        font-weight: 600;
      }
      label {
        display: block;
        margin-bottom: 6px;
        font-weight: 500;
        color: #334155;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 10px;
        margin-bottom: 18px;
        border: 1px solid #cbd5e1;
        border-radius: 6px;
        font-size: 1em;
        background: #f8fafc;
        transition: border 0.2s;
      }
      input:focus,
      textarea:focus,
      select:focus {
        border-color: #2563eb;
        outline: none;
      }
      .btn {
        background: #1e40af;
        color: #fff;
        border: none;
        padding: 14px 32px;
        border-radius: 6px;
        font-size: 1.1em;
        cursor: pointer;
        font-weight: 600;
        transition: background 0.2s;
        width: 100%;
        margin-top: 10px;
      }
      .btn:hover {
        background: #1d4ed8;
      }
      .order-items {
        margin-bottom: 18px;
      }
      .order-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 0;
        border-bottom: 1px solid #e2e8f0;
        font-size: 1em;
        color: #334155;
      }
      .order-item:last-child {
        border-bottom: none;
      }
      .order-total,
      .order-subtotal {
        display: flex;
        justify-content: space-between;
        font-weight: 600;
        font-size: 1.1em;
        margin-top: 10px;
      }
      .order-total {
        color: #1e40af;
        font-size: 1.2em;
        margin-top: 18px;
      }
      @media (max-width: 900px) {
        .container {
          flex-direction: column;
          padding: 18px 6vw;
        }
        .order-summary,
        .checkout-form {
          min-width: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <form class="checkout-form" id="checkout-form" autocomplete="off">
        <h2>Checkout</h2>
        <h3>Informasi Pembeli</h3>
        <label for="name">Nama Lengkap</label>
        <input type="text" id="name" name="name" required />

        <label for="email">Email</label>
        <input type="email" id="email" name="email" required />

        <label for="phone">Nomor Telepon</label>
        <input type="tel" id="phone" name="phone" required />

        <label for="address">Alamat Pengiriman</label>
        <textarea id="address" name="address" rows="3" required></textarea>

        <label for="payment">Metode Pembayaran</label>
        <select id="payment" name="payment" required>
          <option value="">Pilih Metode</option>
          <option value="cod">Bayar di Tempat (COD)</option>
          <option value="transfer">Transfer Bank</option>
          <option value="ewallet">E-Wallet</option>
        </select>

        <button type="submit" class="btn">Konfirmasi &amp; Bayar</button>
      </form>
      <div class="order-summary">
        <h3>Ringkasan Pesanan</h3>
        <div class="order-items" id="order-items">
          <!-- Barang dari keranjang akan muncul di sini -->
        </div>
        <div class="order-subtotal">
          <span>Subtotal</span>
          <span id="order-subtotal">Rp 0</span>
        </div>
        <div class="order-total">
          <span>Total</span>
          <span id="order-total">Rp 0</span>
        </div>
      </div>
    </div>
    <script>
      // Ambil data keranjang dari localStorage (format: [{name, qty, price}])
      function formatRupiah(num) {
        return "Rp " + num.toLocaleString("id-ID");
      }

      function getCart() {
        try {
          const cart = JSON.parse(localStorage.getItem("cart"));
          if (Array.isArray(cart) && cart.length > 0) return cart;
        } catch {}
        // Fallback dummy data jika keranjang kosong
        return [
          { name: "Paracetamol 500mg", qty: 2, price: 5000 },
          { name: "Vitamin C 1000mg", qty: 1, price: 15000 },
        ];
      }

      function renderOrderSummary() {
        const cart = getCart();
        const orderItems = document.getElementById("order-items");
        orderItems.innerHTML = "";
        let subtotal = 0;
        cart.forEach((item) => {
          const totalItem = item.qty * item.price;
          subtotal += totalItem;
          const div = document.createElement("div");
          div.className = "order-item";
          div.innerHTML = `
            <span>${item.name} <span style="color:#64748b;font-size:0.95em;">x${
            item.qty
          }</span></span>
            <span>${formatRupiah(totalItem)}</span>
          `;
          orderItems.appendChild(div);
        });
        document.getElementById("order-subtotal").textContent =
          formatRupiah(subtotal);
        document.getElementById("order-total").textContent =
          formatRupiah(subtotal);
      }

      renderOrderSummary();

      // Optional: validasi form & alert sukses
      document
        .getElementById("checkout-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          alert("Terima kasih! Pesanan Anda telah diterima.");
          // Kosongkan keranjang jika ingin
          // localStorage.removeItem('cart');
          window.location.href = "index.html";
        });
    </script>
  </body>
</html>
